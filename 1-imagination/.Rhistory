draft_chart_first_game
draft_chart_first_game <- base_chart_first_game +
# backdrop image with fill to create border
geom_image(data=first_game_images, mapping=aes(x=-20, y=5, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = first_game_images, aes(x = -20, y = 5, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = first_game_images, aes(x = -9.5, y = 4.5, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = first_game_images, aes(x = -15, y = -4, label = text_label_2),
fill = NA, box.size = NA)
draft_chart_first_game
draft_chart_first_game <- base_chart_first_game +
# backdrop image with fill to create border
geom_image(data=first_game_images, mapping=aes(x=-20, y=5, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = first_game_images, aes(x = -20, y = 5, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = first_game_images, aes(x = -9.75, y = 4.5, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = first_game_images, aes(x = -15, y = -4, label = text_label_2),
fill = NA, box.size = NA)
draft_chart_first_game
draft_chart_first_game <- base_chart_first_game +
# backdrop image with fill to create border
geom_image(data=first_game_images, mapping=aes(x=-20, y=5, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = first_game_images, aes(x = -20, y = 5, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = first_game_images, aes(x = -10.25, y = 4.5, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = first_game_images, aes(x = -15, y = -4, label = text_label_2),
fill = NA, box.size = NA)
draft_chart_first_game
draft_chart_first_game <- base_chart_first_game +
# backdrop image with fill to create border
geom_image(data=first_game_images, mapping=aes(x=-20, y=5, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = first_game_images, aes(x = -20, y = 5, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = first_game_images, aes(x = -10.25, y = 4.5, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = first_game_images, aes(x = -18, y = -4, label = text_label_2),
fill = NA, box.size = NA)
draft_chart_first_game
draft_chart_first_game <- base_chart_first_game +
# backdrop image with fill to create border
geom_image(data=first_game_images, mapping=aes(x=-20, y=5, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = first_game_images, aes(x = -20, y = 5, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = first_game_images, aes(x = -10.25, y = 4.5, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = first_game_images, aes(x = -20, y = -4, label = text_label_2),
fill = NA, box.size = NA)
draft_chart_first_game
draft_chart_first_game <- base_chart_first_game +
# backdrop image with fill to create border
geom_image(data=first_game_images, mapping=aes(x=-20, y=5, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = first_game_images, aes(x = -20, y = 5, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = first_game_images, aes(x = -10.25, y = 4.5, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = first_game_images, aes(x = -14, y = -4, label = text_label_2),
fill = NA, box.size = NA)
draft_chart_first_game
draft_chart_first_game <- base_chart_first_game +
# backdrop image with fill to create border
geom_image(data=first_game_images, mapping=aes(x=-20, y=5, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = first_game_images, aes(x = -20, y = 5, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = first_game_images, aes(x = -10.25, y = 4.5, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = first_game_images, aes(x = -16.5, y = -4, label = text_label_2),
fill = NA, box.size = NA)
draft_chart_first_game
?geom_textbox
draft_chart_first_game <- base_chart_first_game +
# backdrop image with fill to create border
geom_image(data=first_game_images, mapping=aes(x=-20, y=5, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = first_game_images, aes(x = -20, y = 5, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = first_game_images, aes(x = -10.25, y = 4.5, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = first_game_images, aes(x = -16.5, y = -4, label = text_label_2),
fill = "cornsilk", box.size = NA, box.colour ="black" )
draft_chart_first_game
draft_chart_first_game <- base_chart_first_game +
# backdrop image with fill to create border
geom_image(data=first_game_images, mapping=aes(x=-20, y=5, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = first_game_images, aes(x = -20, y = 5, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = first_game_images, aes(x = -10.25, y = 4.5, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = first_game_images, aes(x = -16.5, y = -4, label = text_label_2),
fill = "cornsilk", box.size = NA, box.color ="black" )
draft_chart_first_game
# Creating the visualization
# Step 1: Create data frame with player images and labels
images <- data.frame(
nameTeam = c( "Cleveland Cavaliers", "Los Angeles Lakers"),
date = c("October 29, 2003", "October 29, 2023"),
label = c("Rookie LeBron", "20-Year Vet LeBron"),
image = c("./assets/lebron_2003.png",
"./assets/lebron_2023.png")
) |>
left_join(lebron_stats, by = c("nameTeam" = "name_team")) |>
mutate(text_label_1 = glue("<span style='font-size:14px;'>**{toupper(label)}**</span><br>
<span style='font-size:14px;'>**{toupper(date)}**</span><br>
<span style='font-size:12.5px;color:grey40;'>{nameTeam}</span><br>"),
text_label_2 = glue("<span style='font-size:12.5px;color:grey40;'>**{total} shot attempts**</span><br>
<span style='color:#FF9999;font-size:12.5px;'>{round(x3pt_pct,0)}% were 3PT-ers</span><br>
<span style='color:#50C878;font-size:12.5px;'>{round(mid_range_pct,0)}% were Mid-Range</span><br>
<span style='color:#99CCFF;font-size:12.5px;'>{round(paint_pct,0)}% were in the Paint</span>")
)
# Step 2: Circle crop player images
images$cropped <- cropcircles::circle_crop(
images = images$image, border_size = 1, border_colour = "whitesmoke"
)
# Create 2 separate tables for the images
first_game_images <- images |>
filter(date_game == "20031029")
year_twenty_game_images <- images |>
filter(date_game == "20231029")
# first game shot chart
base_chart_first_game <- create_shotchart(all_shots,"LeBron James",20031029)
draft_chart_first_game <- base_chart_first_game +
# backdrop image with fill to create border
geom_image(data=first_game_images, mapping=aes(x=-20, y=5, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = first_game_images, aes(x = -20, y = 5, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = first_game_images, aes(x = -10.25, y = 4.5, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = first_game_images, aes(x = -16.5, y = -4, label = text_label_2),
fill = "cornsilk", box.size = NA)
draft_chart_first_game
draft_chart_first_game <- base_chart_first_game +
# backdrop image with fill to create border
geom_image(data=first_game_images, mapping=aes(x=-20, y=5, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = first_game_images, aes(x = -20, y = 5, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = first_game_images, aes(x = -10.25, y = 4.5, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = first_game_images, aes(x = -16.5, y = -4, label = text_label_2, colour = "black"),
fill = "cornsilk", box.size = NA)
draft_chart_first_game
# Set the output directory
output_dir <- "./assets/"
# Save the plot in PNG format
ggsave(paste0(output_dir, "rookie_shot_chart.png"), plot = draft_chart_first_game, width = 7.5, height = 7.5)
# Save the plot in PNG format
ggsave(paste0(output_dir, "rookie_shot_chart.png"), plot = draft_chart_first_game, width = 12, height = 9)
# Save the plot in PNG format
ggsave(paste0(output_dir, "rookie_shot_chart.png"), plot = draft_chart_first_game, width = 12, height = 10)
draft_chart_first_game <- base_chart_first_game +
# backdrop image with fill to create border
geom_image(data=first_game_images, mapping=aes(x=-20, y=4, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = first_game_images, aes(x = -20, y = 4, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = first_game_images, aes(x = -10.25, y = 4.5, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = first_game_images, aes(x = -16.5, y = -4, label = text_label_2, colour = "black"),
fill = "cornsilk", box.size = NA)
draft_chart_first_game
# Save the plot in PNG format
ggsave(paste0(output_dir, "rookie_shot_chart.png"), plot = draft_chart_first_game, width = 12, height = 10)
draft_chart_yr_twenty_game <- base_chart_yr_twenty_game +
# backdrop image with fill to create border
geom_image(data=year_twenty_game_images, mapping=aes(x=-20, y=6, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = year_twenty_game_images, aes(x = -20, y = 6, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = year_twenty_game_images, aes(x = 5, y = 6, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = year_twenty_game_images, aes(x = -15, y = -7, label = text_label_2),
fill = NA, box.size = NA) +
# Create your own discrete scale
scale_fill_manual(values=rev(c("#99CCFF", "#50C878", "#FF9999"))) +
# For position scales, a vector of range expansion constants used to add some padding around the data to ensure that they are placed some distance away from the axes
scale_y_continuous(expand=c(0.1,0.2)) +
# Cartesian coordinates with fixed "aspect ratio"
coord_equal() +
# Set guides for each scale
guides(fill = guide_legend(override.aes=list(size=5)))
draft_chart_yr_twenty_game
# year twenty shot chart
base_chart_yr_twenty_game <- create_shotchart(all_shots,"LeBron James",20231029)
draft_chart_yr_twenty_game <- base_chart_yr_twenty_game +
# backdrop image with fill to create border
geom_image(data=year_twenty_game_images, mapping=aes(x=-20, y=6, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = year_twenty_game_images, aes(x = -20, y = 6, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = year_twenty_game_images, aes(x = 5, y = 6, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = year_twenty_game_images, aes(x = -15, y = -7, label = text_label_2),
fill = NA, box.size = NA) +
# Create your own discrete scale
scale_fill_manual(values=rev(c("#99CCFF", "#50C878", "#FF9999"))) +
# For position scales, a vector of range expansion constants used to add some padding around the data to ensure that they are placed some distance away from the axes
scale_y_continuous(expand=c(0.1,0.2)) +
# Cartesian coordinates with fixed "aspect ratio"
coord_equal() +
# Set guides for each scale
guides(fill = guide_legend(override.aes=list(size=5)))
draft_chart_yr_twenty_game
# Save the plot in PNG format
ggsave(paste0(output_dir, "veteran_shot_chart.png"), plot = draft_chart_yr_twenty_game, width = 7.5, height = 7.5)
draft_chart_first_game <- base_chart_first_game +
# backdrop image with fill to create border
geom_image(data=first_game_images, mapping=aes(x=-20, y=6, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = first_game_images, aes(x = -20, y = 6, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = first_game_images, aes(x = 5, y = 6, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = first_game_images, aes(x = -15, y = -7, label = text_label_2),
fill = NA, box.size = NA) +
# Create your own discrete scale
scale_fill_manual(values=rev(c("#99CCFF", "#50C878", "#FF9999"))) +
# For position scales, a vector of range expansion constants used to add some padding around the data to ensure that they are placed some distance away from the axes
scale_y_continuous(expand=c(0.1,0.2)) +
# Cartesian coordinates with fixed "aspect ratio"
coord_equal() +
# Set guides for each scale
guides(fill = guide_legend(override.aes=list(size=5)))
draft_chart_first_game
# Set the output directory
output_dir <- "./assets/"
# Save the plot in PNG format
ggsave(paste0(output_dir, "rookie_shot_chart.png"), plot = draft_chart_first_game, width = 12, height = 10)
# Save the plot in PNG format
ggsave(paste0(output_dir, "rookie_shot_chart.png"), plot = draft_chart_first_game, width = 7.5, height = 7.5)
draft_chart_first_game +
theme(legend.position = "top", # move the legend to the top
legend.title = element_text(face="bold", size=12), # make the title bold and increase the size
plot.margin = margin(t=20), #increases the Top margin of the plot by 20
legend.text = element_text(size=12), #inceases size of text
legend.margin = margin(rep(0,4)),# Adjusting legend margin
legend.key = element_blank(), # Remove default legend key
axis.text = element_blank(), # Remove default axit text
legend.justification = "left", # Move legend to the left
panel.background = element_blank(),# Remove panel background
panel.grid.minor=element_blank(),# Remove panel grid minor
axis.title=element_blank(), # Remove axis titles
axis.ticks = element_blank())# Remove axis ticks
?legend
draft_chart_first_game +
theme(legend.position = "top", # move the legend to the top
legend.title = element_text(face="bold", size=12), # make the title bold and increase the size
plot.margin = margin(t=20), #increases the Top margin of the plot by 20
legend.text = element_text(size=12), #inceases size of text
legend.margin = margin(rep(0,4)),# Adjusting legend margin
legend.key = element_blank(), # Remove default legend key
axis.text = element_blank(), # Remove default axit text
legend.justification = "center", # Move legend to the left
panel.background = element_blank(),# Remove panel background
panel.grid.minor=element_blank(),# Remove panel grid minor
axis.title=element_blank(), # Remove axis titles
axis.ticks = element_blank())# Remove axis ticks
?nbastatR
draft_chart_first_game <- base_chart_first_game +
# backdrop image with fill to create border
geom_image(data=first_game_images, mapping=aes(x=-20, y=6, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = first_game_images, aes(x = -20, y = 6, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = first_game_images, aes(x = 4, y = 6, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = first_game_images, aes(x = -15, y = -7, label = text_label_2),
fill = NA, box.size = NA) +
# Create your own discrete scale
scale_fill_manual(values=rev(c("#99CCFF", "#50C878", "#FF9999"))) +
# For position scales, a vector of range expansion constants used to add some padding around the data to ensure that they are placed some distance away from the axes
scale_y_continuous(expand=c(0.1,0.2)) +
# Cartesian coordinates with fixed "aspect ratio"
coord_equal() +
# Set guides for each scale
guides(fill = guide_legend(override.aes=list(size=5)))
draft_chart_first_game +
theme(legend.position = "top", # move the legend to the top
legend.title = element_text(face="bold", size=12), # make the title bold and increase the size
plot.margin = margin(t=20), #increases the Top margin of the plot by 20
legend.text = element_text(size=12), #inceases size of text
legend.margin = margin(rep(0,4)),# Adjusting legend margin
legend.key = element_blank(), # Remove default legend key
axis.text = element_blank(), # Remove default axit text
legend.justification = "center", # Move legend to the left
panel.background = element_blank(),# Remove panel background
panel.grid.minor=element_blank(),# Remove panel grid minor
axis.title=element_blank(), # Remove axis titles
axis.ticks = element_blank())# Remove axis ticks
draft_chart_first_game <- base_chart_first_game +
# backdrop image with fill to create border
geom_image(data=first_game_images, mapping=aes(x=-20, y=6, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = first_game_images, aes(x = -20, y = 6, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = first_game_images, aes(x = 3.8, y = 6, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = first_game_images, aes(x = -15, y = -7, label = text_label_2),
fill = NA, box.size = NA) +
# Create your own discrete scale
scale_fill_manual(values=rev(c("#99CCFF", "#50C878", "#FF9999"))) +
# For position scales, a vector of range expansion constants used to add some padding around the data to ensure that they are placed some distance away from the axes
scale_y_continuous(expand=c(0.1,0.2)) +
# Cartesian coordinates with fixed "aspect ratio"
coord_equal() +
# Set guides for each scale
guides(fill = guide_legend(override.aes=list(size=5)))
draft_chart_first_game +
theme(legend.position = "top", # move the legend to the top
legend.title = element_text(face="bold", size=12), # make the title bold and increase the size
plot.margin = margin(t=20), #increases the Top margin of the plot by 20
legend.text = element_text(size=12), #inceases size of text
legend.margin = margin(rep(0,4)),# Adjusting legend margin
legend.key = element_blank(), # Remove default legend key
axis.text = element_blank(), # Remove default axit text
legend.justification = "center", # Move legend to the left
panel.background = element_blank(),# Remove panel background
panel.grid.minor=element_blank(),# Remove panel grid minor
axis.title=element_blank(), # Remove axis titles
axis.ticks = element_blank())# Remove axis ticks
draft_chart_yr_twenty_game <- base_chart_yr_twenty_game +
# backdrop image with fill to create border
geom_image(data=year_twenty_game_images, mapping=aes(x=-20, y=6, image=cropped), color="#818990", size=0.16, asp=1/1.2) +
# player image
geom_image(data = year_twenty_game_images, aes(x = -20, y = 6, image = cropped), size = 0.15, asp = 1 / 1.2) +
# text_label_1 with name and team
ggtext::geom_textbox(data = year_twenty_game_images, aes(x = 3.8, y = 6, label = text_label_1),
fill = NA, box.size = NA) +
# text_label_2 with stats
ggtext::geom_textbox(data = year_twenty_game_images, aes(x = -15, y = -7, label = text_label_2),
fill = NA, box.size = NA) +
# Create your own discrete scale
scale_fill_manual(values=rev(c("#99CCFF", "#50C878", "#FF9999"))) +
# For position scales, a vector of range expansion constants used to add some padding around the data to ensure that they are placed some distance away from the axes
scale_y_continuous(expand=c(0.1,0.2)) +
# Cartesian coordinates with fixed "aspect ratio"
coord_equal() +
# Set guides for each scale
guides(fill = guide_legend(override.aes=list(size=5)))
draft_chart_yr_twenty_game +
theme(legend.position = "top", # move the legend to the top
legend.title = element_text(face="bold", size=12), # make the title bold and increase the size
plot.margin = margin(t=20), #increases the Top margin of the plot by 20
legend.text = element_text(size=12), #inceases size of text
legend.margin = margin(rep(0,4)),# Adjusting legend margin
legend.key = element_blank(), # Remove default legend key
axis.text = element_blank(), # Remove default axit text
legend.justification = "center", # Move legend to the left
panel.background = element_blank(),# Remove panel background
panel.grid.minor=element_blank(),# Remove panel grid minor
axis.title=element_blank(), # Remove axis titles
axis.ticks = element_blank())# Remove axis ticks
final_chart_first_game <- draft_chart_first_game +
theme(legend.position = "top", # move the legend to the top
legend.title = element_text(face="bold", size=12), # make the title bold and increase the size
plot.margin = margin(t=20), #increases the Top margin of the plot by 20
legend.text = element_text(size=12), #inceases size of text
legend.margin = margin(rep(0,4)),# Adjusting legend margin
legend.key = element_blank(), # Remove default legend key
axis.text = element_blank(), # Remove default axit text
legend.justification = "center", # Move legend to the center
panel.background = element_blank(),# Remove panel background
panel.grid.minor=element_blank(),# Remove panel grid minor
axis.title=element_blank(), # Remove axis titles
axis.ticks = element_blank())# Remove axis ticks
# Save the plot in PNG format
ggsave(paste0(output_dir, "final_rookie_shot_chart.png"), plot = final_chart_first_game, width = 7.5, height = 7.5)
final_chart_yr_twenty_game <- draft_chart_yr_twenty_game +
theme(legend.position = "top", # move the legend to the top
legend.title = element_text(face="bold", size=12), # make the title bold and increase the size
plot.margin = margin(t=20), #increases the Top margin of the plot by 20
legend.text = element_text(size=12), #inceases size of text
legend.margin = margin(rep(0,4)),# Adjusting legend margin
legend.key = element_blank(), # Remove default legend key
axis.text = element_blank(), # Remove default axit text
legend.justification = "center", # Move legend to the center
panel.background = element_blank(),# Remove panel background
panel.grid.minor=element_blank(),# Remove panel grid minor
axis.title=element_blank(), # Remove axis titles
axis.ticks = element_blank())# Remove axis ticks
# Save the plot in PNG format
ggsave(paste0(output_dir, "final_veteran_shot_chart.png"), plot = final_chart_yr_twenty_game, width = 7.5, height = 7.5)
base_lebron_league_chart <- ggplot(final_trend_data, aes(x = yearSeason, y = percentage, color = player, group = player)) +
geom_line(linewidth=1) +
geom_point(size = 2)
league_shots <- all_shots |>
# Scale x and y coordinates (court dimensions adjusted manually)
mutate(x = (locationX / 10) - 0,
y = (locationY / 10) - 41.75) |>
# Remove shots from beyond half-court range
filter(y < 0) |>
mutate(
# Categorize shots based on distance from the basket
court_zone = case_when(
distanceShot <= 8 ~ "Paint",               # Shots close to the basket
distanceShot > 8 & distanceShot < 23 ~ "Mid-Range",  # Shots outside the paint but inside the 3PT line
distanceShot >= 23 ~ "3PT",                # Shots beyond the 3-point line
TRUE ~ "Other"                            # Catch-all for undefined cases
)
)
lebron_shots <- league_shots %>%
filter(namePlayer == "LeBron James")
# Step 1: Calculate LeBron's three-point attempt percentage by season
lebron_3pt_attempts <- lebron_shots |>
filter(court_zone == "3PT") |>
group_by(yearSeason) |>
summarize(lebron_3pt_attempts = n(), .groups = "drop")
lebron_total_attempts <- lebron_shots  |>
group_by(yearSeason) |>
summarize(lebron_total_shots = n(), .groups = "drop")
lebron_3pt_pct <- left_join(lebron_3pt_attempts,lebron_total_attempts,by="yearSeason") |>
mutate(
percentage = (lebron_3pt_attempts / lebron_total_shots) * 100,
player = "LeBron James")
# Step 2: Calculate league-wide three-point attempt percentage by season
league_3pt_attempts <- league_shots |>
filter(court_zone == "3PT") |>
filter(yearSeason != "2003") |>
group_by(yearSeason) |>
summarize(league_3pt_attempts = n(), .groups = "drop")
league_total_attempts <- league_shots  |>
filter(yearSeason != "2003") |>
group_by(yearSeason) |>
summarize(league_total_shots = n(), .groups = "drop")
league_3pt_pct <- left_join(league_3pt_attempts,league_total_attempts,by="yearSeason") |>
mutate(
percentage = (league_3pt_attempts / league_total_shots) * 100,
player = "Entire League")
# Step 3: Merge LeBron's and league-wide data
final_trend_data <- bind_rows(lebron_3pt_pct, league_3pt_pct)
base_lebron_league_chart <- ggplot(final_trend_data, aes(x = yearSeason, y = percentage, color = player, group = player)) +
geom_line(linewidth=1) +
geom_point(size = 2)
final_lebron_league_chart <- base_lebron_league_chart +
# Animation: reveal a path per season
transition_reveal(yearSeason) +
labs(
title = "LeBron James versus The League : Shot choices by Zone",
x = "Season",
y = "% of Shots",
color = "Court Zone"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
library(tidyverse)
library(BasketballAnalyzeR)
library(nbastatR)
library(ggimage)
library(cropcircles)
library(ggtext)
library(glue)
library(janitor)
library(htmltools)
library(gganimate)
library(viridis)
# Source functions
source(file="./R/00-functions.R")
# Read csv file with all NBA shots data from 2003 to 2024
all_shots <- read.csv("./data/allshots-2003-2024.csv")
final_lebron_league_chart <- base_lebron_league_chart +
# Animation: reveal a path per season
transition_reveal(yearSeason) +
labs(
title = "LeBron James versus The League : Shot choices by Zone",
x = "Season",
y = "% of Shots",
color = "Court Zone"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
# Save the animation
anim_save("./assets/lebron_vs_league.gif", final_lebron_league_chart)
final_lebron_league_chart <- base_lebron_league_chart +
# Animation: reveal a path per season
transition_reveal(yearSeason) +
labs(
title = "LeBron James versus The League : % of 3PT shots attempted",
x = "Season",
y = "% of 3PT shots",
color = "Key"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
# Save the animation
anim_save("./assets/lebron_vs_league.gif", final_lebron_league_chart)
